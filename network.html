<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JMDC | Network Diagnostic</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">
    
    <style>
        :root {
            --bg: #0f172a; --card: #1e293b; 
            --primary: #3b82f6; --accent: #60a5fa; 
            --success: #10b981; --text: #f1f5f9; --muted: #94a3b8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; }
        body { background-color: var(--bg); color: var(--text); min-height: 100vh; display: flex; flex-direction: column; }

        /* HEADER */
        header {
            background: rgba(30, 41, 59, 0.9); padding: 1rem 5%; border-bottom: 1px solid #334155;
            display: flex; justify-content: space-between; align-items: center; backdrop-filter: blur(10px);
        }
        .brand { font-size: 1.3rem; font-weight: 800; color: var(--primary); letter-spacing: 1px; }
        .btn-back { color: var(--muted); text-decoration: none; display: flex; align-items: center; gap: 8px; font-size: 0.9rem; border: 1px solid #334155; padding: 8px 16px; border-radius: 6px; transition: 0.3s; }
        .btn-back:hover { background: #334155; color: white; }

        /* MAIN LAYOUT */
        main { padding: 2rem 5%; max-width: 1200px; margin: 0 auto; width: 100%; }
        h1 { font-size: 1.8rem; margin-bottom: 0.5rem; font-weight: 300; }
        h1 strong { font-weight: 800; color: var(--primary); }
        p.subtitle { color: var(--muted); margin-bottom: 2rem; }

        /* --- GRID SYSTEM REFORMULADO (O SEGREDO DO ALINHAMENTO) --- */
        .grid-container {
            display: grid;
            /* Cria 4 colunas iguais em telas grandes */
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        /* Classes para controlar o tamanho dos cards */
        .span-1 { grid-column: span 1; } /* Ocupa 1 espa√ßo */
        .span-2 { grid-column: span 2; } /* Ocupa 2 espa√ßos (Metade) */
        .span-4 { grid-column: span 4; } /* Ocupa tudo (Full Width) */

        /* CARD DESIGN PADRONIZADO */
        .card {
            background: var(--card); border: 1px solid #334155; border-radius: 12px; padding: 20px;
            display: flex; flex-direction: column; justify-content: space-between; height: 100%;
            transition: transform 0.2s, border-color 0.2s; position: relative;
        }
        .card:hover { transform: translateY(-3px); border-color: var(--primary); }

        /* Estilos Internos dos Cards */
        .card-header { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
        .icon-box { width: 36px; height: 36px; background: rgba(59, 130, 246, 0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: var(--primary); }
        .icon-box svg { width: 20px; height: 20px; }
        
        .card-title { font-size: 0.85rem; text-transform: uppercase; color: var(--muted); font-weight: 700; letter-spacing: 0.5px; }
        .card-value { font-size: 1.2rem; font-weight: 700; color: white; word-break: break-all; }
        .card-footer { font-size: 0.75rem; color: var(--success); margin-top: 5px; }

        /* INPUTS PARA PING/TRACERT */
        .tool-input-group { display: flex; gap: 5px; margin-top: 10px; }
        .tool-input { background: rgba(0,0,0,0.2); border: 1px solid #334155; color: white; padding: 8px; border-radius: 4px; width: 100%; font-size: 0.9rem; }
        .btn-action { background: var(--primary); color: white; border: none; padding: 0 12px; border-radius: 4px; cursor: pointer; transition: 0.3s; }
        .btn-action:hover { background: var(--accent); }

        /* ESTILO LISTA REPOSIT√ìRIO */
        .file-list { list-style: none; margin-top: 10px; max-height: 250px; overflow-y: auto; padding-right: 5px; }
        .file-list::-webkit-scrollbar { width: 5px; }
        .file-list::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        .file-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .file-name { font-size: 0.9rem; font-weight: 600; display: flex; align-items: center; gap: 8px; }
        .btn-dl-mini { background: rgba(16, 185, 129, 0.1); color: var(--success); padding: 4px 10px; border-radius: 4px; text-decoration: none; font-size: 0.75rem; border: 1px solid rgba(16, 185, 129, 0.2); transition: 0.2s; }
        .btn-dl-mini:hover { background: var(--success); color: white; }

        /* SPEEDTEST */
        .speedtest-container { background: var(--card); border: 1px solid #334155; border-radius: 12px; overflow: hidden; height: 500px; }
        iframe { width: 100%; height: 100%; border: none; background: #000; }

        /* RESPONSIVIDADE */
        @media (max-width: 900px) {
            .grid-container { grid-template-columns: repeat(2, 1fr); }
            .span-1 { grid-column: span 1; }
            .span-2 { grid-column: span 2; }
            .span-4 { grid-column: span 2; } /* Ajusta full width para mobile */
        }
        @media (max-width: 600px) {
            .grid-container { grid-template-columns: 1fr; }
            .span-1, .span-2, .span-4 { grid-column: span 1; }
        }
    </style>
</head>
<body>

    <header>
        <div class="brand">JMDC TOOLS</div>
        <a href="index.html" class="btn-back">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Voltar
        </a>
    </header>

    <main>
        <h1>Painel <strong>T√©cnico</strong></h1>
        <p class="subtitle">Diagn√≥stico em tempo real e utilit√°rios.</p>

        <div class="grid-container">
            
            <div class="card span-1">
                <div>
                    <div class="card-header">
                        <div class="icon-box"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg></div>
                        <div class="card-title">IP P√∫blico</div>
                    </div>
                    <div id="ip-addr" class="card-value" style="color: var(--primary); font-size: 1.1rem;">Carregando...</div>
                </div>
                <div class="card-footer">Dual Stack (v4/v6)</div>
            </div>

            <div class="card span-1">
                <div>
                    <div class="card-header">
                        <div class="icon-box"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg></div>
                        <div class="card-title">Provedor</div>
                    </div>
                    <div id="isp-info" class="card-value" style="font-size: 1rem;">Detectando...</div>
                </div>
                <div class="card-footer">Geolocaliza√ß√£o Ativa</div>
            </div>

            <div class="card span-1">
                <div>
                    <div class="card-header">
                        <div class="icon-box"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg></div>
                        <div class="card-title">Lat√™ncia (Ping)</div>
                    </div>
                    <div class="tool-input-group">
                        <input type="text" id="ping-target" class="tool-input" value="google.com" placeholder="Dom√≠nio">
                        <button onclick="runPing()" class="btn-action">Go</button>
                    </div>
                    <div id="ping-result" style="margin-top: 10px; font-weight: bold; font-size: 0.9rem;">Aguardando...</div>
                </div>
            </div>

            <div class="card span-1">
                <div>
                    <div class="card-header">
                        <div class="icon-box"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg></div>
                        <div class="card-title">Rota (Tracert)</div>
                    </div>
                    <div class="tool-input-group">
                        <input type="text" id="trace-target" class="tool-input" value="8.8.8.8" placeholder="IP/Dom√≠nio">
                        <button onclick="runTracert()" class="btn-action">Go</button>
                    </div>
                    <div style="font-size: 0.7rem; color: #94a3b8; margin-top: 5px;">*Abre ferramenta externa</div>
                </div>
            </div>

            <div class="card span-4" style="border-color: var(--success);">
                <div class="card-header">
                    <div class="icon-box" style="background: rgba(16,185,129,0.1); color: var(--success);"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg></div>
                    <div class="card-title" style="color: var(--success);">Reposit√≥rio de Ferramentas (/ferramentas)</div>
                </div>
                
                <ul class="file-list">
                    <li class="file-item">
                        <span class="file-name">üìÑ AnyDesk.exe</span>
                        <a href="ferramentas/AnyDesk.exe" class="btn-dl-mini" download>‚¨á Baixar</a>
                    </li>
                    <li class="file-item">
                        <span class="file-name">‚öôÔ∏è CONFIGURAR IP.bat</span>
                        <a href="ferramentas/CONFIGURAR IP.bat" class="btn-dl-mini" download>‚¨á Baixar</a>
                    </li>
                    <li class="file-item">
                        <span class="file-name">üì° IP SCAN.exe</span>
                        <a href="ferramentas/IP SCAN.exe" class="btn-dl-mini" download>‚¨á Baixar</a>
                    </li>
                    <li class="file-item">
                        <span class="file-name">üíª putty.exe</span>
                        <a href="ferramentas/putty.exe" class="btn-dl-mini" download>‚¨á Baixar</a>
                    </li>
                    <li class="file-item">
                        <span class="file-name">üì¶ 7ZIP / WinRAR</span>
                        <div>
                             <a href="ferramentas/7ZIP.exe" class="btn-dl-mini">7Z</a>
                             <a href="ferramentas/7WINRAR.exe" class="btn-dl-mini">RAR</a>
                        </div>
                    </li>
                     <li class="file-item">
                        <span class="file-name">üåê Chrome / Office</span>
                        <div>
                             <a href="ferramentas/ChromeSetup.exe" class="btn-dl-mini">Chrome</a>
                             <a href="ferramentas/OfficeSetup.exe" class="btn-dl-mini">Office</a>
                        </div>
                    </li>
                </ul>
            </div>

            <div class="card span-4" style="padding: 0; border: none; background: transparent;">
                <div class="speedtest-container">
                    <iframe src="https://openspeedtest.com/Get-widget.php"></iframe>
                </div>
            </div>

        </div> </main>

    <script>
        // 1. IP INFO (v4 e v6)
        async function getNetworkData() {
            const ipEl = document.getElementById('ip-addr');
            let v4 = "...", v6 = "...";
            
            try {
                // Tenta v4
                try {
                    let r4 = await fetch('https://api.ipify.org?format=json');
                    let d4 = await r4.json();
                    v4 = d4.ip;
                } catch(e) { v4 = "v4 off"; }

                // Tenta v6
                try {
                    let r6 = await fetch('https://api6.ipify.org?format=json');
                    let d6 = await r6.json();
                    v6 = d6.ip;
                } catch(e) { v6 = ""; }

                ipEl.innerHTML = `<span style="color:#3b82f6">${v4}</span><br><span style="font-size:0.7rem; color:#94a3b8">${v6}</span>`;
                
                // ISP Info
                let rGeo = await fetch('https://ipapi.co/json/');
                let dGeo = await rGeo.json();
                document.getElementById('isp-info').innerText = `${dGeo.org} - ${dGeo.city}`;

            } catch(e) { console.log(e); }
        }
        getNetworkData();

        // 2. FUN√á√ÉO PING (Simula√ß√£o via HTTP Fetch)
        async function runPing() {
            const target = document.getElementById('ping-target').value;
            const resEl = document.getElementById('ping-result');
            resEl.innerText = "Pingando...";
            resEl.style.color = "#94a3b8";

            const start = new Date().getTime();
            try {
                // Tenta carregar uma imagem ou recurso do dom√≠nio (modo cors) ou fallback
                // Nota: Ping real via browser √© bloqueado. Usamos o tempo de resposta HTTP.
                // Usamos 'no-cors' para permitir requisi√ß√£o opaca, medindo apenas o tempo.
                await fetch(`https://${target}`, { mode: 'no-cors', cache: 'no-cache' });
                const end = new Date().getTime();
                const time = end - start;
                
                let color = time < 100 ? '#10b981' : (time < 300 ? '#fbbf24' : '#ef4444');
                resEl.innerHTML = `Tempo: <span style="color:${color}">${time}ms</span> (HTTP)`;
            } catch (e) {
                resEl.innerText = "Erro/Bloqueio (CORS)";
                resEl.style.color = "#ef4444";
            }
        }

        // 3. FUN√á√ÉO TRACERT (Link Externo)
        function runTracert() {
            const target = document.getElementById('trace-target').value;
            // Abre uma ferramenta confi√°vel em nova aba
            window.open(`https://api.hackertarget.com/mtr/?q=${target}`, '_blank');
        }
    </script>
</body>
</html>
